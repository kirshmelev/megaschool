# Помощник по покупкам

!! Это прототип интерфейса, сервис пока не работает!!

Это реализация первых шагов MVP сервиса анализа товаров маркетплейсов.

## Установка и запуск

1. Установите зависимости: `pip install -r requirements.txt`
2. Скопируйте файл `.env.example` в `.env` и укажите API-ключи.
3. Запустите приложение: `python main.py`

## Функциональность

- Сбор данных с Wildberries, Ozon, СберМегаМаркет, Яндекс Маркет
- Базовый анализ данных с использованием LLM (OpenAI)

## Примечания

- Селекторы для парсинга упрощены и могут потребовать доработки.
- Обработка ошибок реализована в минимальном объёме.
- Для продакшена рекомендуется использовать официальные API, где они доступны.

## Подробная реализация интерфейса и логики

### Общее описание интерфейса
Главная страница представляет собой веб-приложение на Flask с красивым, адаптивным дизайном. Интерфейс включает:
- **Поле для свободного запроса**: Текстовое поле для ввода описания желаемого товара (например, "красный смартфон Samsung с камерой 50MP").
- **Прикрепление фото**: Input для загрузки изображения товара (JPEG/PNG), которое пользователь может прикрепить для уточнения запроса.
- **Запись голоса**: Кнопка для записи аудио через браузер (используя Web Audio API), аудиофайл прикрепляется к запросу. Для простоты, аудио сохраняется как файл и может быть обработано позже (например, для распознавания речи).
- **Кнопка отправки**: После ввода данных отправляет запрос на сервер.
- **Вывод результатов**: После обработки отображаются примеры карточек товаров с маркетплейсов (симуляция реальных данных).

Дизайн: Градиентный фон, карточки с тенями, эмодзи для визуального улучшения. Адаптивный для мобильных устройств.

### Логика работы

#### 1. Ввод данных пользователем
- Пользователь открывает главную страницу (http://127.0.0.1:5000/).
- Вводит текст в поле запроса.
- Опционально: Загружает фото (file input, сохраняется на сервере в папку uploads/).
- Опционально: Записывает голос (JavaScript для записи аудио, сохраняется как .wav или .webm в uploads/).
- Нажимает "Отправить запрос".

#### 2. Обработка на сервере (Flask)
- **Прием данных**: Flask получает POST-запрос с текстом, файлом фото и файлом аудио.
- **Валидация**: Проверяет, что хотя бы текст введен. Если фото/аудио есть, сохраняет их.
- **Симуляция обработки**:
  - Текст запроса используется как основа для генерации фиктивных товаров.
  - Фото: Пока не обрабатывается (заглушка), но сохраняется для будущего анализа (например, через компьютерное зрение).
  - Аудио: Пока не транскрибируется (заглушка), но сохраняется для будущего распознавания речи (например, через Whisper API).
- **Генерация результатов**: Создает 3-5 фиктивных карточек товаров на основе запроса (например, если запрос "смартфон", показывает разные модели с ценами и источниками).
- **Вывод**: Рендерит страницу с результатами.

#### 3. Вывод результатов
- **Карточки товаров**: Каждая карточка включает:
  - Изображение (фиктивное или placeholder).
  - Название товара.
  - Цена.
  - Источник (Wildberries, Ozon и т.д.).
  - Кнопка "Купить" (ссылка-заглушка).
- **Дополнительно**: Самый дешевый товар выделен, таблица сравнения.
- Если ошибка (нет данных), показывает сообщение.

#### 4. Техническая реализация
- **Frontend**: HTML с inline CSS и JavaScript для записи аудио.
  - JavaScript: `navigator.mediaDevices.getUserMedia()` для доступа к микрофону, запись в MediaRecorder, отправка как Blob.
- **Backend**: Flask роут `/` для GET (форма) и POST (обработка).
  - Сохранение файлов: `uploads/` папка.
  - Симуляция данных: Фиктивные словари товаров.
- **Безопасность**: Базовая, без валидации файлов (для MVP).
- **Расширения**: В будущем добавить обработку фото (OCR, image search), транскрибацию аудио (Whisper), реальный сбор данных с маркетплейсов.

#### 5. Файловая структура
- `main.py`: Flask приложение.
- `templates/`: Если нужно, но пока inline HTML.
- `uploads/`: Для фото и аудио.
- `static/`: Для CSS/JS, если отделить.

#### 6. Тестирование
- Запустить сервер, ввести запрос, загрузить файлы, проверить вывод карточек.
- Проверить на мобильном (адаптивность).

Эта реализация является заглушкой для MVP, фокусируясь на UI/UX, с возможностью расширения для реальной функциональности.
